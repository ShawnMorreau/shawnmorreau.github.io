{"ast":null,"code":"import _classCallCheck from\"/Users/shawnmorreau/Desktop/shawnmorreau.github.io/Backend/FrontEnd/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/shawnmorreau/Desktop/shawnmorreau.github.io/Backend/FrontEnd/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/shawnmorreau/Desktop/shawnmorreau.github.io/Backend/FrontEnd/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/shawnmorreau/Desktop/shawnmorreau.github.io/Backend/FrontEnd/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from\"react\";import Blog from\"./Blog.js\";import BlogAdmin from\"./BlogAdmin.js\";import\"../Syling/Styling.css\";var _default=/*#__PURE__*/function(_React$Component){_inherits(_default,_React$Component);var _super=_createSuper(_default);function _default(){var _this;_classCallCheck(this,_default);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={posts:[]};_this.getLastIndexOfPosts=function(){return _this.state.posts[_this.state.posts.length-1];};_this.createNewPost=function(postObject){// const posts = {\n//     ...this.state.posts,\n//     postObject\n// }\nvar requestOptions={method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(postObject)};fetch('api/blog/add',requestOptions).then(function(response){if(response.status!==200){console.log(\"there is a problem yukka\");return;}}).then(function(response){return response;});// .then(data=>this.setState({posts:data}))\n};_this.deletePost=function(post_id){var newState=_this.state.posts.filter(function(x){return x.id!==post_id;});var requestOptions={method:'DELETE',headers:{'Content-type':'application/json'},body:JSON.stringify({id:post_id})};fetch('api/blog',requestOptions).then(_this.setState({posts:newState}));};return _this;}_createClass(_default,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;fetch('/api/blog/').then(function(res){return res.json();}).then(function(data){return _this2.setState({posts:data});});}},{key:\"render\",value:function render(){var _this3=this;var posts=this.state.posts.map(function(post,i){return/*#__PURE__*/React.createElement(Blog,{key:i,id:post.id,title:post.title,content:post.content,deletePost:_this3.deletePost});});return/*#__PURE__*/React.createElement(React.Fragment,null,posts,/*#__PURE__*/React.createElement(BlogAdmin,{createNewPost:this.createNewPost}));}}]);return _default;}(React.Component);export{_default as default};","map":{"version":3,"sources":["/Users/shawnmorreau/Desktop/shawnmorreau.github.io/Backend/FrontEnd/src/Blog/BlogContainer.js"],"names":["React","Blog","BlogAdmin","state","posts","getLastIndexOfPosts","length","createNewPost","postObject","requestOptions","method","headers","body","JSON","stringify","fetch","then","response","status","console","log","deletePost","post_id","newState","filter","x","id","setState","res","json","data","map","post","i","title","content","Component"],"mappings":"wtBAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,IAAP,KAAiB,WAAjB,CACA,MAAOC,CAAAA,SAAP,KAAsB,gBAAtB,CACA,MAAO,uBAAP,C,2VAGIC,K,CAAQ,CACJC,KAAK,CAAE,EADH,C,OASRC,mB,CAAoB,UAAI,CACpB,MAAO,OAAKF,KAAL,CAAWC,KAAX,CAAiB,MAAKD,KAAL,CAAWC,KAAX,CAAiBE,MAAjB,CAAwB,CAAzC,CAAP,CACH,C,OACDC,a,CAAc,SAACC,UAAD,CAAc,CACxB;AACA;AACA;AACA;AACA,GAAMC,CAAAA,cAAc,CAAG,CACnBC,MAAM,CAAE,MADW,CAEnBC,OAAO,CAAE,CAAE,eAAgB,kBAAlB,CAFU,CAGnBC,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAeN,UAAf,CAHa,CAAvB,CAKAO,KAAK,CAAC,cAAD,CAAiBN,cAAjB,CAAL,CACKO,IADL,CACU,SAAAC,QAAQ,CAAE,CACX,GAAGA,QAAQ,CAACC,MAAT,GAAmB,GAAtB,CAA0B,CACtBC,OAAO,CAACC,GAAR,CAAY,0BAAZ,EACA,OACH,CACR,CANF,EAQKJ,IARL,CAQU,SAAAC,QAAQ,QAAIA,CAAAA,QAAJ,EARlB,EASI;AACP,C,OACDI,U,CAAW,SAACC,OAAD,CAAW,CAClB,GAAMC,CAAAA,QAAQ,CAAG,MAAKpB,KAAL,CAAWC,KAAX,CAAiBoB,MAAjB,CAAwB,SAAAC,CAAC,QAAEA,CAAAA,CAAC,CAACC,EAAF,GAASJ,OAAX,EAAzB,CAAjB,CACA,GAAMb,CAAAA,cAAc,CAAC,CACjBC,MAAM,CAAC,QADU,CAEjBC,OAAO,CAAC,CAAC,eAAe,kBAAhB,CAFS,CAGjBC,IAAI,CAACC,IAAI,CAACC,SAAL,CAAe,CAACY,EAAE,CAACJ,OAAJ,CAAf,CAHY,CAArB,CAKAP,KAAK,CAAC,UAAD,CAAYN,cAAZ,CAAL,CACKO,IADL,CACU,MAAKW,QAAL,CAAc,CAACvB,KAAK,CAACmB,QAAP,CAAd,CADV,EAEH,C,iGAvCmB,iBAChBR,KAAK,CAAC,YAAD,CAAL,CACKC,IADL,CACU,SAAAY,GAAG,CAAE,CAAC,MAAOA,CAAAA,GAAG,CAACC,IAAJ,EAAP,CAAkB,CADlC,EAEKb,IAFL,CAEU,SAAAc,IAAI,QAAE,CAAA,MAAI,CAACH,QAAL,CAAc,CAACvB,KAAK,CAAC0B,IAAP,CAAd,CAAF,EAFd,EAIH,C,uCAmCQ,iBACL,GAAI1B,CAAAA,KAAK,CAAG,KAAKD,KAAL,CAAWC,KAAX,CAAiB2B,GAAjB,CAAqB,SAACC,IAAD,CAAMC,CAAN,qBACzB,oBAAC,IAAD,EACI,GAAG,CAAEA,CADT,CAEI,EAAE,CAAED,IAAI,CAACN,EAFb,CAGI,KAAK,CAAEM,IAAI,CAACE,KAHhB,CAII,OAAO,CAAEF,IAAI,CAACG,OAJlB,CAKI,UAAU,CAAE,MAAI,CAACd,UALrB,EADyB,EAArB,CAAZ,CASA,mBACI,wCACKjB,KADL,cAEI,oBAAC,SAAD,EACI,aAAa,CAAE,KAAKG,aADxB,EAFJ,CADJ,CAQH,C,sBA9DwBP,KAAK,CAACoC,S","sourcesContent":["import React from \"react\";\nimport Blog from \"./Blog.js\";\nimport BlogAdmin from \"./BlogAdmin.js\";\nimport \"../Syling/Styling.css\";\n\nexport default class extends React.Component {\n    state = {\n        posts: []\n    }\n    componentDidMount() {\n        fetch('/api/blog/')\n            .then(res=>{return res.json()})\n            .then(data=>this.setState({posts:data}));\n\n    }\n    getLastIndexOfPosts=()=>{\n        return this.state.posts[this.state.posts.length-1]\n    }\n    createNewPost=(postObject)=>{\n        // const posts = {\n        //     ...this.state.posts,\n        //     postObject\n        // }\n        const requestOptions = {\n            method: 'POST',\n            headers: { 'Content-Type': 'application/json' },\n            body: JSON.stringify(postObject)\n        };\n        fetch('api/blog/add', requestOptions)\n            .then(response=>{\n                 if(response.status !==200){\n                     console.log(\"there is a problem yukka\");\n                     return;\n                 }\n         })\n            \n            .then(response => response)\n            // .then(data=>this.setState({posts:data}))\n    }\n    deletePost=(post_id)=>{\n        const newState = this.state.posts.filter(x=>x.id !== post_id);\n        const requestOptions={\n            method:'DELETE',\n            headers:{'Content-type':'application/json'},\n            body:JSON.stringify({id:post_id})\n        }\n        fetch('api/blog',requestOptions)\n            .then(this.setState({posts:newState}))\n    }\n    render() {\n        let posts = this.state.posts.map((post,i) =>\n                <Blog\n                    key={i}\n                    id={post.id}\n                    title={post.title}\n                    content={post.content}\n                    deletePost={this.deletePost}\n                />\n            );\n        return (\n            <>\n                {posts}\n                <BlogAdmin\n                    createNewPost={this.createNewPost}\n                />\n            </>\n        );\n    }\n}"]},"metadata":{},"sourceType":"module"}